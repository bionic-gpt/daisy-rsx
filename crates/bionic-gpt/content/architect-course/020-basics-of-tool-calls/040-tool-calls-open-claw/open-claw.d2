classes: {
  # ── structural ────────────────────────────
  panel: {
    style.border-radius: 12
    style.stroke-width: 2
    style.fill: "transparent"
  }

  card: {
    style.border-radius: 10
    style.fill: "transparent"
    style.stroke-width: 1
  }

  # ── semantic colors (stroke + text) ───────
  blue: {
    style.stroke: "#3b82f6"
    style.font-color: "#93c5fd"
  }

  amber: {
    style.stroke: "#f59e0b"
    style.font-color: "#fbbf24"
  }

  cyan: {
    style.stroke: "#06b6d4"
    style.font-color: "#67e8f9"
  }

  green: {
    style.stroke: "#22c55e"
    style.font-color: "#4ade80"
  }

  violet: {
    style.stroke: "#8b5cf6"
    style.font-color: "#c4b5fd"
  }

  red: {
    style.stroke: "#ef4444"
    style.font-color: "#fca5a5"
  }

  # ── edges ─────────────────────────────────
  edge-green: {style.stroke: "#22c55e"; style.stroke-width: 2}
  edge-amber: {style.stroke: "#f59e0b"; style.stroke-width: 2}
  edge-cyan: {style.stroke: "#06b6d4"; style.stroke-width: 2}
  edge-violet: {style.stroke: "#8b5cf6"; style.stroke-width: 2}
  edge-red: {style.stroke: "#ef4444"; style.stroke-width: 2}
  dashed: {style.stroke-dash: 6}
}

grid-columns: 1
style.fill: "#1a1e2e"
style.font-color: "#e6edf3"

# ─────────────────────────────────────────────
# Header
# ─────────────────────────────────────────────
header: "Open Claw" {
  class: [panel; red]
  grid-rows: 2
  grid-gap: 6
}

# ─────────────────────────────────────────────
# Agent Loop
# ─────────────────────────────────────────────
agent: "Agentic Loop" {
  class: [panel; green]

  grid-columns: 4
  grid-gap: 18

  prompt: "User + System Prompt" {class: [card; green]}
  llm: "LLM" {class: [card; green]}
  tool_call: "Tool Call" {class: [card; cyan]}
  tool_result: "Tool Result" {class: [card; cyan]}
  response: "Final Response" {class: [card; green]}
}

# Primary flow
agent.prompt -> agent.llm: {class: edge-green}
agent.llm -> agent.response: {class: edge-green}

# Tool loop
agent.llm -> agent.tool_call: {class: edge-green}
agent.tool_call -> agent.tool_result: {class: edge-cyan}
agent.tool_result -> agent.llm: {class: edge-green}

# ─────────────────────────────────────────────
# Bottom row (corrected to match gist toolset)
# ─────────────────────────────────────────────
main_tools: "Tool Surface" {
  class: [panel; violet]
  grid-columns: 4
  grid-gap: 20

  memory: "Memory" {
    class: [panel; violet]
    grid-columns: 1
    grid-gap: 10

    memory_search: "• memory_search" {class: [card; violet]}
    memory_get: "• memory_get" {class: [card; violet]}
  }

  web: "Web" {
    class: [panel; green]
    grid-columns: 1
    grid-gap: 10

    web_search: "• web_search" {class: [card; green]}
    web_fetch: "• web_fetch" {class: [card; green]}
  }

  sandbox: "Filesystem + Exec" {
    class: [panel; red]
    grid-columns: 1
    grid-gap: 10

    read: "• read" {class: [card; red]}
    edit: "• edit" {class: [card; red]}
    write: "• write" {class: [card; red]}
    exec: "• exec" {class: [card; red]}
    process: "• process" {class: [card; red]}
  }

  automation: "Automation Surfaces" {
    class: [panel; cyan]
    grid-columns: 1
    grid-gap: 10

    browser: "• browser" {class: [card; cyan]}
    canvas: "• canvas" {class: [card; cyan]}
    nodes: "• nodes" {class: [card; cyan]}
  }

  orchestration: "Orchestration" {
    class: [panel; amber]
    grid-columns: 1
    grid-gap: 10

    agents_list: "• agents_list" {class: [card; amber]}
    sessions_list: "• sessions_list" {class: [card; amber]}
    sessions_history: "• sessions_history" {class: [card; amber]}
    sessions_send: "• sessions_send" {class: [card; amber]}
    sessions_spawn: "• sessions_spawn" {class: [card; amber]}
    subagents: "• subagents" {class: [card; amber]}
    session_status: "• session_status" {class: [card; amber]}
    message: "• message" {class: [card; amber]}
    tts: "• tts" {class: [card; amber]}
  }
}

# Agent → bottom blocks (corrected)
agent -> main_tools.memory: {class: edge-violet}
agent -> main_tools.web: {class: edge-green}
agent -> main_tools.sandbox: {class: edge-red}
agent -> main_tools.automation: {class: edge-cyan}
agent -> main_tools.orchestration: {class: edge-amber}